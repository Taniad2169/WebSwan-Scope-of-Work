<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSwan - E-Signature Agreement</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: bold;
        }
        
        body {
            background: white;
            color: #14395d;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            min-height: 95vh;
        }
        
        header {
            background: #14395d;
            color: #1DF1F1;
            padding: 25px;
            text-align: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }
        
        .logo i {
            font-size: 36px;
            margin-right: 15px;
            color: #1DF1F1;
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 10px;
            color: #1DF1F1;
        }
        
        .header-description {
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            color: #1DF1F1;
        }
        
        .content-wrapper {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .form-section {
            padding: 20px;
        }

        .form-section h2 {
            color: #14395d;
            border-bottom: 2px solid #14395d;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .form-container {
            padding: 25px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            background: white;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #14395d;
        }
        
        input[type="text"],
        input[type="email"],
        input[type="date"],
        textarea,
        select,
        input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            box-sizing: border-box;
            background-color: #e1e9f0;
            font-weight: bold;
            color: #073766;
        }
        
        .auto-resize {
            field-sizing: content;
            min-width: 150px;
        }
        
        .checkbox-group label, .radio-group label {
            display: inline-flex;
            align-items: center;
            margin-right: 20px;
            font-weight: bold;
            color: #14395d;
        }

        .checkbox-group input, .radio-group input {
            margin-right: 8px;
            width: auto;
        }
        
        .miscellaneous-comment-container,
        .custom-price-container,
        .monthly-custom-container {
            display: none;
            margin-top: 15px;
        }

        .disclaimer-container {
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            margin-top: 20px;
            overflow-y: auto;
            max-height: 400px;
            -webkit-overflow-scrolling: touch;
        }
        
        .disclaimer-container h2 {
            color: #14395d;
            font-weight: bold;
        }

        .disclaimer-container strong {
            color: #14395d;
        }

        .signature-section {
            padding: 20px;
            text-align: center;
            background: #f9f9f9;
            border-top: 1px solid #ccc;
        }

        #signature-pad-container {
            border: 2px dashed #95a5a6;
            border-radius: 5px;
            margin-top: 10px;
        }

        #signature-pad {
            width: 100%;
            height: 200px;
            background-color: #ecf0f1;
            border-radius: 5px;
            cursor: crosshair;
        }

        #signature-pad.disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .btn-row {
            text-align: center;
            margin-top: 20px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }
        
        .btn-primary {
            background-color: #14395d;
            color: white;
        }

        .btn-secondary {
            background-color: #95a5a6;
            color: white;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }

        footer {
            text-align: center;
            padding: 20px;
            font-size: 0.9em;
            color: #7f8c8d;
            background-color: #f1f1f1;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            max-width: 450px;
            width: 90%;
            text-align: center;
        }
        
        .modal-close {
            background: #4a6580;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-feather-alt"></i>
                <h1>WebSwan E-Signature Agreement</h1>
            </div>
            <p class="header-description">Please provide your information and sign the agreement below</p>
        </header>

        <div class="content-wrapper">
            <main>
                <div class="form-section">
                    <h2>Client Information</h2>
                    <form id="project-form">
                        <div class="form-group">
                            <label for="client-name">Project's Name:</label>
                            <input type="text" id="client-name" name="client-name" class="auto-resize" required>
                        </div>
                        <div class="form-group">
                            <label for="client-address">Client Address:</label>
                            <input type="text" id="client-address" name="client-address" class="auto-resize" required>
                        </div>
                        <div class="form-group">
                            <label for="client-phone">Client Phone Number:</label>
                            <input type="text" id="client-phone" name="client-phone" class="auto-resize" required>
                        </div>
                        <div class="form-group">
                            <label for="client-email">Email Address:</label>
                            <input type="email" id="client-email" name="client-email" class="auto-resize" required>
                        </div>

                        <div class="form-group">
                            <label for="project-type">What was the project?</label>
                            <select id="project-type" name="project-type" class="auto-resize">
                                <option value="1899">Standard $1,899 web design</option>
                                <option value="1599">Landing page $1,599</option>
                                <option value="3899">Premium web design $3,899</option>
                                <option value="7999">Ultimate premium plan $7,999</option>
                                <option value="discounted">Discounted</option>
                                <option value="specialOffer">Special Offer</option>
                            </select>
                        </div>
                        <div id="custom-price-container" class="custom-price-container">
                            <div class="form-group">
                                <label for="custom-price">Enter Custom Amount:</label>
                                <input type="number" id="custom-price" name="custom-price" class="auto-resize" placeholder="$" min="0">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="calendar-date">Calendar</label>
                            <input type="date" id="calendar-date" name="calendar-date" class="auto-resize">
                        </div>
                        <div class="form-group">
                            <label>Additional Selections:</label>
                            <div class="checkbox-group">
                                <label>
                                    <input type="checkbox" name="addons" value="195">
                                    $195 Logo
                                </label>
                                <label>
                                    <input type="checkbox" name="addons" value="95">
                                    $95 QR code
                                </label>
                                <label>
                                    <input type="checkbox" name="addons" value="450">
                                    $450 Custom forms & calendars
                                </label>
                                <label>
                                    <input type="checkbox" name="addons" value="195">
                                    $195 Language translator
                                </label>
                                <label>
                                    <input type="checkbox" name="addons" value="150">
                                    $150 Ad campaign script for social media
                                </label>
                            </div>
                            <div class="radio-group">
                                <label>
                                    <input type="radio" name="video-addons" value="899">
                                    $899 Ad campaign video without a website
                                </label>
                                <label>
                                    <input type="radio" name="video-addons" value="799">
                                    $799 Ad campaign video with a website
                                </label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="miscellaneous-amount">Miscellaneous Amount:</label>
                            <input type="number" id="miscellaneous-amount" name="miscellaneous-amount" class="auto-resize" placeholder="$" min="0">
                        </div>
                        
                        <div class="form-group">
                            <label for="reputation-management">Reputation management</label>
                            <select id="reputation-management" name="reputation-management" class="auto-resize">
                                <option value="0">N/A</option>
                                <option value="99">With website $99/month</option>
                                <option value="109">Standalone $109/month</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="additional-comments">Additional Comments (1000-word capacity):</label>
                            <textarea id="additional-comments" name="additional-comments" rows="10" maxlength="1000"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="monthly-payment">Monthly payment for hosting security and maintenance</label>
                            <select id="monthly-payment" name="monthly-payment" class="auto-resize">
                                <option value="0">N/A</option>
                                <option value="69">$69</option>
                                <option value="99">$99</option>
                                <option value="109">$109</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div id="monthly-custom-container" class="monthly-custom-container">
                            <div class="form-group">
                                <label for="monthly-custom-amount">Enter Custom Amount:</label>
                                <input type="number" id="monthly-custom-amount" name="monthly-custom-amount" class="auto-resize" placeholder="$" min="0">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="total-amount">Total Due</label>
                            <input type="text" id="total-amount" name="total-amount" class="auto-resize" placeholder="Amount will auto-populate">
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="paid-today-checkbox">
                                Amount to be paid today:
                            </label>
                            <input type="number" id="paid-today-amount" name="paid-today-amount" class="auto-resize" placeholder="$" min="0" readonly>
                        </div>
                        <div class="btn-row">
                            <button type="button" class="btn btn-primary" id="save-btn-data">Save Data</button>
                        </div>
                    </form>
                </div>

                <div class="disclaimer-container">
                    <h2>WebSwan Scope of Work for Web Design Services</h2>
                    <p><strong>1. Project Overview</strong><br>
                    We begin with a free demo at no cost and with no obligation. This demo requires approximately 15 minutes of your time to review the design and discuss any updates or changes you would like. If you decide not to proceed, you pay nothing. Once the presentation is complete and the website’s core structure and design links are in place, we will collect full payment and continue working to complete the remaining links and content. Please note that at the time of payment, the website’s design and structure will be established, but not all links will yet be fully live. This project involves the design, development, and maintenance of a professional website for [Client's Business]. The website will serve as a platform to showcase Client's Business/Product/Services and engage with potential customers.</p>
                    <p><strong>2. Deliverables</strong><br>
                    Custom website design and layout based on client's branding and requirements. Development of responsive website pages optimized for desktop and mobile devices. Integration of essential features such as contact forms, galleries, and social media links, security measures and set up of website hosting.</p>
                    <p><strong>3. Pricing and Payment Terms</strong><br>
                    Please refer to <a href="https://www.thewebswan.com/pricing--39bf6158-d773-4eaa-aae7-7828c9fdd8db" target="_blank">https://www.thewebswan.com/pricing--39bf6158-d773-4eaa-aae7-7828c9fdd8db</a> Our pricing includes everything discussed in the scope of work for the design, layout, functionality, and all the essential elements for a professional, fully functional website tailored to your business.</p>
                    <p><strong>4. Client Responsibilities</strong><br>
                    Provide clear direction, feedback, and content for the website. Review and approve design mockups and website drafts in a timely manner. Collaborate with the designer during the development process.</p>
                    <p><strong>5. Revisions and Change Requests</strong><br>
                    Two rounds of revisions are included in the design fee. For additional editing after the two rounds the cost is $75/revision/edits.</p>
                    <p><strong>6. Testing and Quality Assurance</strong><br>
                    Thorough testing of the website across different browsers and devices to ensure compatibility and functionality. Client review and feedback process during the testing phase to address any issues or concerns.</p>
                    <p><strong>7. Launch and Handover</strong><br>
                    Finalization of website design and functionality. Transfer of website ownership and necessary credentials to the client. Training or documentation provided for basic website maintenance tasks. Client is responsible to link their domain with a third party.</p>
                    <p><strong>8. Legal Terms</strong><br>
                    Limitations of liability and warranty disclaimer. Ownership of intellectual property rights upon full payment of design fee. Dispute resolution process outlined in the agreement.</p>
                    <p><strong>Website Design Service Agreement</strong><br>
                    Before we finalize our services, please review the following terms regarding the connection of your domain: <strong>Responsibility for Domain Connection:</strong> Once your website is fully designed, tested, and running smoothly on all devices, it becomes your responsibility to connect your domain to the website domain service. <strong>Assistance Available:</strong> Should you require assistance with connecting your domain, our web designer will be happy to provide guidance and support. This assistance is offered at no additional cost. However, please note that while we offer this assistance as a courtesy, we are not responsible for any actions, errors, or issues caused by third party domain providers. <strong>Limitations of Service:</strong> Our primary role is to design and develop your website to your specifications. Once the design is finalized and the website is operational, our service is considered complete. <strong>Additional Assistance:</strong> While our commitment to customer satisfaction extends to helping you connect your domain, please understand that domain connection is facilitated by a third-party. We will make every effort to assist you, but we cannot control or guarantee the actions or troubleshooting of third-party domain providers. We do not collect or sell your information to third parties. Your information is used solely for communication purposes while we work on your project. For more details, please review our Privacy Policy at <a href="https://www.thewebswan.com/privacy-policy" target="_blank">https://www.thewebswan.com/privacy-policy</a></p>
                </div>
            </main>
            <div class="signature-section">
                <div class="agreement-check" id="agreementCheck">
                    <input type="checkbox" id="agreeCheckbox">
                    <p><strong>I acknowledge, understand and agree to the terms and conditions above</strong></p>
                </div>
                
                <div id="signature-pad-container">
                    <canvas id="signature-pad" class="disabled"></canvas>
                </div>
                <div class="signature-controls">
                    <button type="button" class="btn btn-secondary" id="clear-btn" disabled>Clear</button>
                    <button type="button" class="btn btn-primary" id="save-btn" disabled>Save Signature</button>
                    <button type="button" class="btn btn-success" id="print-btn">Print</button>
                </div>
            </div>
        </div>
        <footer>
            <p>&copy; 2024 The Web Swan. All rights reserved.</p>
        </footer>
    </div>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";
    
        const firebaseConfig = {
            apiKey: "AIzaSyAI8EofhSR7hArQ-e37YdaxTxYZd8kv-ZA",
            authDomain: "the-webswan-scope-of-work.firebaseapp.com",
            projectId: "the-webswan-scope-of-work",
            storageBucket: "the-webswan-scope-of-work.firebasestorage.app",
            messagingSenderId: "1035131028150",
            appId: "1:1035131028150:web:1d9f99f887f09ccdfa5c17",
            measurementId: "G-R34YB3CVBR"
        };
    
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const projectForm = document.getElementById('project-form');
        const projectType = document.getElementById('project-type');
        const customPriceContainer = document.getElementById('custom-price-container');
        const customPriceInput = document.getElementById('custom-price');
        const addons = document.querySelectorAll('input[name="addons"]');
        const videoAddons = document.querySelectorAll('input[name="video-addons"]');
        const reputationManagement = document.getElementById('reputation-management');
        const monthlyPayment = document.getElementById('monthly-payment');
        const monthlyCustomContainer = document.getElementById('monthly-custom-container');
        const monthlyCustomAmountInput = document.getElementById('monthly-custom-amount');
        const miscellaneousAmountInput = document.getElementById('miscellaneous-amount');
        const totalAmountInput = document.getElementById('total-amount');
        const paidTodayCheckbox = document.getElementById('paid-today-checkbox');
        const paidTodayAmountInput = document.getElementById('paid-today-amount');
        const saveBtnData = document.getElementById('save-btn-data');
        const printBtn = document.getElementById('print-btn');

        // Signature Pad Elements
        const agreeCheckbox = document.getElementById('agreeCheckbox');
        const signaturePad = document.getElementById('signature-pad');
        const clearBtn = document.getElementById('clear-btn');
        const saveBtn = document.getElementById('save-btn');
        const ctx = signaturePad.getContext('2d');
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;
        
        function getInputValue(inputElement) {
            let value = parseFloat(inputElement.value);
            return isNaN(value) ? 0 : value;
        }

        function calculateTotal() {
            let total = 0;
            
            // Project Amount
            const selectedProjectType = projectType.value;
            if (selectedProjectType === 'discounted' || selectedProjectType === 'specialOffer') {
                total += getInputValue(customPriceInput);
            } else {
                total += parseInt(selectedProjectType) || 0;
            }

            // Additional Selections
            addons.forEach(checkbox => {
                if (checkbox.checked) {
                    total += parseInt(checkbox.value) || 0;
                }
            });

            videoAddons.forEach(radio => {
                if (radio.checked) {
                    total += parseInt(radio.value) || 0;
                }
            });
            
            // Miscellaneous Amount
            total += getInputValue(miscellaneousAmountInput);

            // Reputation Management
            total += parseInt(reputationManagement.value) || 0;

            // Monthly Payment
            const selectedMonthlyPayment = monthlyPayment.value;
            if (selectedMonthlyPayment === 'other') {
                total += getInputValue(monthlyCustomAmountInput);
            } else {
                total += parseInt(selectedMonthlyPayment) || 0;
            }

            totalAmountInput.value = `$${total.toFixed(2)}`;
        }

        // Listen for changes on all relevant inputs
        projectType.addEventListener('change', () => {
            if (projectType.value === 'discounted' || projectType.value === 'specialOffer') {
                customPriceContainer.style.display = 'block';
            } else {
                customPriceContainer.style.display = 'none';
            }
            calculateTotal();
        });
        customPriceInput.addEventListener('input', calculateTotal);
        addons.forEach(checkbox => checkbox.addEventListener('change', calculateTotal));
        videoAddons.forEach(radio => radio.addEventListener('change', calculateTotal));
        reputationManagement.addEventListener('change', calculateTotal);
        miscellaneousAmountInput.addEventListener('input', calculateTotal);

        monthlyPayment.addEventListener('change', () => {
            if (monthlyPayment.value === 'other') {
                monthlyCustomContainer.style.display = 'block';
            } else {
                monthlyCustomContainer.style.display = 'none';
            }
            calculateTotal();
        });
        monthlyCustomAmountInput.addEventListener('input', calculateTotal);

        paidTodayCheckbox.addEventListener('change', function() {
            if (this.checked) {
                paidTodayAmountInput.removeAttribute('readonly');
            } else {
                paidTodayAmountInput.setAttribute('readonly', 'true');
            }
        });

        saveBtnData.addEventListener('click', async () => {
            const formData = new FormData(projectForm);
            const data = {};
            for (const [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            const selectedAddons = [];
            addons.forEach(checkbox => {
                if (checkbox.checked) {
                    selectedAddons.push(checkbox.value);
                }
            });
            data['addons'] = selectedAddons;
            
            const selectedVideoAddon = Array.from(videoAddons).find(radio => radio.checked);
            if (selectedVideoAddon) {
                data['video-addons'] = selectedVideoAddon.value;
            }

            data['total-due'] = totalAmountInput.value;
            data['amount-paid-today'] = paidTodayAmountInput.value;
            data['timestamp'] = new Date();

            try {
                const docRef = await addDoc(collection(db, "projects"), data);
                // alert("Form data saved to Firestore! Document ID: " + docRef.id);
                console.log("Document written with ID: ", docRef.id);
            } catch (e) {
                console.error("Error adding document: ", e);
                // alert("Error saving data. Check the console for details.");
            }
        });
        
        printBtn.addEventListener('click', () => {
            window.print();
        });

        // Signature Pad Logic
        function initSignaturePad() {
            ctx.fillStyle = '#ecf0f1';
            ctx.fillRect(0, 0, signaturePad.width, signaturePad.height);
            ctx.strokeStyle = '#14395d';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
        }

        signaturePad.addEventListener('mousedown', (e) => {
            if (signaturePad.classList.contains('disabled')) {
                // alert('Please agree to the terms and conditions first.');
                return;
            }
            isDrawing = true;
            [lastX, lastY] = [e.offsetX, e.offsetY];
        });

        signaturePad.addEventListener('mousemove', (e) => {
            if (!isDrawing || signaturePad.classList.contains('disabled')) return;
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.stroke();
            [lastX, lastY] = [e.offsetX, e.offsetY];
        });

        signaturePad.addEventListener('mouseup', () => isDrawing = false);
        signaturePad.addEventListener('mouseout', () => isDrawing = false);

        clearBtn.addEventListener('click', () => {
            initSignaturePad();
        });

        saveBtn.addEventListener('click', () => {
            const signatureData = signaturePad.toDataURL();
            // alert('Signature data saved successfully!');
            console.log(signatureData); // For demonstration
        });

        agreeCheckbox.addEventListener('change', function() {
            if (this.checked) {
                signaturePad.classList.remove('disabled');
                clearBtn.disabled = false;
                saveBtn.disabled = false;
            } else {
                signaturePad.classList.add('disabled');
                clearBtn.disabled = true;
                saveBtn.disabled = true;
            }
        });

        calculateTotal();
        initSignaturePad();
    </script>
</body>
</html>
